
3장 우수한 데이터 아키텍처 설계

- 엔터프라이즈 아키텍처
    - 가역적 의사결정 (되돌릴수 있는 의사결정) + 변경 관리 + 트레이드 오프 고려
- 데이터 아키텍처 (EA의 하위 요소)
    - 운영 (무엇을?) / 기술 (어떻게?) 아키텍처를 고려

---

구체적 원칙

1. 공통 컴포넌트를 현명하게 선택하라. 
    - 객체 스토리지, 버전 제어 시스템, 관찰 가능성, 모니터링 및 오케스트레이션 시스템, 처리 엔진 등
2. 장애에 대비하라.
    - 가용성 (작동 가능한 시간), 신뢰성 (시스템이 의도한 기능대로 수행할 확률), 복구 시간 목표 (장애 최대 허용 시간), 복구 시점 목표 (복구 후 허용 가능한 상태)를 기반으로 장애를 평가
3. 확장성을 위한 아키텍처를 설계하라.
4. 아키텍처는 리더십이다. : 개별 기여 작업을 잘 위임하기. 
5. 항상 아키텍처에 충실하라. : 기본 아키텍처에 대해 깊이 이해하고 목표 아키텍처를 개발하며 이것에 대한 시퀀싱 계획을 잘 수립하기
6. 느슨하게 결합된 시스템을 구축하라 : 시스템은 작은 컴포넌트들로 구성됨. 추상화 계층을 통해 다른 서비스와 상호작용하기. 다른 팀의 기술 세부는 걱정하지 않기.
7. 되돌릴 수 있는 의사결정을 하라.
8. 보안 우선순위를 지정하라
    - 강화된 경계 보안 모델 : 기존 보안 모델은 경계를 넘으면 안전하다고 간주함. 하지만 클라우드/분산 환경에서는 이 경계가 의미 없거나 우회되기 쉬움 ->	정체성 기반, 세분화된 권한, 데이터 중심 보안 등을 별도 보안 계층을 적용
9. 핀옵스를 수용하라
    - [AWS 비용 관리 여정 블로그 포스트](https://engineering.ab180.co/stories/ab180-journey-of-aws-fin-ops)

---

주요 아키텍처 개념

1. 도메인과 서비스
2. 분산 시스템, 확장성, 장애 대비 설계 : 수평 확장 사용
3. 결합 : 계층, 모놀리스, 마이크로서비스
4. 사용자 : 싱글, 멀티테넌트
5. 이벤트 기반 아키텍처 : 스트리밍 및 메시징 시스템
6. 브라운필드 / 그린필드 : 레거시 아키텍처 이해하기 / 유행만 쫓지 않기

---

사례 및 유형

- 데이터 웨어하우스
    - 조직 DWA : 운영계와 정보계 분리. 데이터 중앙 집중화 및 구성 (ETL로 데이터 축적적)
    - 기술 DWA : MPP(Massively Parallel Processing) - 마스터 노드가 쿼리 파싱하고 플랜 생성해서 워커 노드로 분산하고 작업 수행
- 데이터 마트 : 단일 부서/ 비즈니스 라인에 초점 맞춰 구성된 DW의 하위 집합
- 데이터 레이크 : 정형과 비정형 데이터를 한곳에서. 맵리듀스, 스파크, 하이브 등 처리 기술 사용 가능. -> 쓰기만을 고려하고 만들어서 결국 사용할 때 관리 비용 급증. (하둡 클러스터 관리와 생태계 이해를 기반으로 한 고급 인력...)
- 데이터 레이크 하우스 : 데이터 레이크처럼 쓸 수 있으면서 ACID 트랜잭션 지원. 

여기부터 초면인 데이터 처리 아키텍처
- 모던 데이터 스택 : 모듈화 해서 구분하기. 데이터 원천 / 데이터 웨어하우스 / BI와 시각화 ... PnP 모듈식 구성
- 람다 아키텍처 : 스트리밍 실시간 프레임워크 등장으로 배치&스트리밍을 단일 아키텍처로 조정할 필요가 생김. 이에 대한 초기 대응 방안으로 배치, 스트림 각각 별도로 받아서 쿼리 결과 집계하는 방식
- 카파 아키텍처 : 람다 단점인 중복 로직관리 편의를 위해 나온 방법. 스트림으로 모두 변환. 복잡하고 비용이 많이 듦.
- 데이터 흐름 모델, 통합 배치, 스트리밍 : 배치 및 스트림 처리의 문제는 이를 통합하는것. 
    - 구글은 데이터 흐름 모델, 아파치 빔 프레임워크를 제시.
    - 모든 데이터를 이벤트로 간주하고, 실시간 이벤트 스트림은 무한 데이터이고 배치 이벤트는 유한 이벤트 스트림. 이 개념으로 거의 같은 코드를 사용해 같은 시스템을 이용.
- IoT용 아키텍처 
    - 장치(사물) : 최소한의 데이터 수집 전송 능력을 가짐. 이를 전송할 때의 요인들 -> 다운스트림 데이터 수집에 어떤 영향을 미치는지 알아야함.
    - 장치와 인터페이스하는 컴포넌트 : IoT 게이트웨이 (수신처에 라우팅하는 허브. 와이파이 규격), 수집, 스토리지 (메시지 큐나 시계열 db 등), 서빙 등


- 데이터 메시 = 탈중앙화, 분산을 위한 시스템 (아래는 핵심 구성 요소)
    - 도메인 지향 분산형 데이터 소유권 및 아키텍처
    - 제품으로서의 데이터
    - 플렛폼으로서의 셀프서비스 데이터 인프라
    - 통합 컴퓨팅 거버넌스