---
title: ì›¹ í´ë¦­ìŠ¤íŠ¸ë¦¼ ìˆ˜ì§‘í•˜ê¸° 2) ì¹´í”„ì¹´ í´ëŸ¬ìŠ¤í„° êµ¬ì¶•
description: ë¡œì»¬ ê°œë°œ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ í•˜ê³  í´ë¼ìš°ë“œë¡œ ë„ìš°ê¸° ê¹Œì§€
author: annmunju
date: 2025-05-22 19:17:00 +0900
categories: [Ingest-web-click-log, poc]
tags: [develop, kafka]
pin: true
math: true
mermaid: true
comments: true
---

> **ìµœì†Œí•œì˜ ë¹„ìš©ì„ ì§€ë¶ˆí•˜ë©´ì„œ ì¹´í”„ì¹´ ì‚¬ìš©í•´ë³´ê¸°**


ì´ì œ ë³¸ê²©ì ìœ¼ë¡œ **ì¹´í”„ì¹´ í´ëŸ¬ìŠ¤í„°**ë¥¼ êµ¬ì„±í•˜ê³  ë¡œê·¸ ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•  ìˆ˜ ìˆë„ë¡ ì„¸íŒ…í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.  
ì—¬ê¸°ì„œ ì œê°€ ê°€ì¥ ì¤‘ìš”í•˜ê²Œ ìƒê°í•œ ê±´ **ë¹„ìš©**ì…ë‹ˆë‹¤.  
ì¹´í”„ì¹´ì˜ êµ¬ì„±ì„ ì§ì ‘ ìµí˜€ë³´ê³  ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì“°ëŠ”ì§€ ì•Œê¸° ìœ„í•œ PoCì´ê¸° ë•Œë¬¸ì—,  
ì„¤ì¹˜ì™€ ìš´ì˜ì— ë“œëŠ” ë¹„ìš©ì„ ìµœëŒ€í•œ ì¤„ì´ê³ ì **EKS, MSK ê°™ì€ ë§¤ë‹ˆì§€ë“œ ì„œë¹„ìŠ¤ë¥¼ ì“°ì§€ ì•Šê³  ì§ì ‘ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì¹´í”„ì¹´ë¥¼ ë„ì›Œì„œ ì‚¬ìš©**í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤!

---

## ğŸ¯ ì´ë²ˆ ê¸€ ëª©í‘œ

1. **ë¡œì»¬ Kafka í™˜ê²½ í…ŒìŠ¤íŠ¸**  
   - Docker Composeë¡œ Zookeeperì™€ Kafka ë‹¨ì¼ ë…¸ë“œ í´ëŸ¬ìŠ¤í„°ë¥¼ ë„ìš°ê³ , `clickstream` í† í”½ì„ ìƒì„±í•´ **ê¸°ë³¸ í”„ë¡œë“€ì„œÂ·ì»¨ìŠˆë¨¸ í…ŒìŠ¤íŠ¸**ë¥¼ ìˆ˜í–‰  
   - ë¡œì»¬ Kafka í´ëŸ¬ìŠ¤í„° ìœ„ì—ì„œ í”„ë¡œë“€ì„œ APIë¥¼ ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰í•˜ì—¬, ì»¨ìŠˆë¨¸ë¥¼ í†µí•´ ì‹¤ì œ ë©”ì‹œì§€ ìˆ˜ì‹  ì—¬ë¶€ë¥¼ í™•ì¸

2. **EC2 ê¸°ë°˜ Kafka í´ëŸ¬ìŠ¤í„° êµ¬ì¶• ë° ê²€ì¦**  
   - AWS EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì§ì ‘ Zookeeperì™€ Kafkaë¥¼ ì„¤ì¹˜  
   - **ë³´ì•ˆê·¸ë£¹, ë„¤íŠ¸ì›Œí¬ ë“± ê¸°ë³¸ ì¸í”„ë¼ ì„¤ì •**  
   - ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•œì§€ í…ŒìŠ¤íŠ¸ ë° ìš´ì˜ í™˜ê²½ì—ì„œì˜ ë©”ì‹œì§€ ì†¡ìˆ˜ì‹  ê²€ì¦

---

### 1. ë¡œì»¬ Kafka í™˜ê²½ êµ¬ì¶•
ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì„±ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.
```mermaid
flowchart TB
  subgraph "Local Host"
    A["curl ìš”ì²­"] -- "JSON POST" --> B["Ingest API"]
    B --> C["Docker Kafka Broker"]
    C --> D["clickstream í† í”½"]
    D --> E["Consumer CLI"]
  end
```
- curl ìš”ì²­: curl ëª…ë ¹ìœ¼ë¡œ ì´ë²¤íŠ¸(JSON)ë¥¼ ë³´ë‚´ëŠ” ì—­í• 
- Ingest API: fastapië¡œ êµ¬í˜„ëœ kafka producer
- Docker Kafka: Zookeeper + Kafka ë¸Œë¡œì»¤
- clickstream í† í”½: ë©”ì‹œì§€ ì €ì¥ì†Œ
- Consumer CLI: í„°ë¯¸ë„ì—ì„œ ë©”ì‹œì§€ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì½ì–´ í™•ì¸

---

#### 1.1 Docker Compose íŒŒì¼ ì‘ì„± ë° ì‹¤í–‰
ì¹´í”„ì¹´ í´ëŸ¬ìŠ¤í„° êµ¬ì¶•ì„ ìœ„í•´ì„œ ë„ì»¤ ì»´í¬ì¦ˆ íŒŒì¼ ì‘ì„± í›„ ì‹¤í–‰í•©ë‹ˆë‹¤.
```yml
# docker-compose.yml
version: '3.8'
services:
  zookeeper:
    image: confluentinc/cp-zookeeper:7.4.1
    environment:
      ZOOKEEPER_CLIENT_PORT: 2181

  kafka:
    image: confluentinc/cp-kafka:7.4.1
    depends_on:
      - zookeeper
    environment:
      KAFKA_BROKER_ID: 1
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://localhost:9092
      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1
    ports:
      - "9092:9092"
```
- **zookeeper?**
    - ì•„íŒŒì¹˜ì—ì„œ ë§Œë“  **ë¶„ì‚° ì½”ë””ë„¤ì´ì…˜ ì„œë¹„ìŠ¤**ì…ë‹ˆë‹¤.
    - ì¹´í”„ì¹´ í´ëŸ¬ìŠ¤í„°ì—ì„œ ë¸Œë¡œì»¤ ê°„ì˜ **ë©”íƒ€ë°ì´í„° ê´€ë¦¬, ë¦¬ë” ì„ ì¶œ, êµ¬ì„±ì› ë³€í™” ê°ì§€** ë“±ì„ ë‹´ë‹¹í•´ìš”. (ì¹´í”„ì¹´ëŠ” ë©”ì‹œì§€ ì €ì¥ì„ ë‹´ë‹¹í•˜ê³ , ì–´ë–¤ íŒŒí‹°ì…˜ì´ ëª‡ ê°œë©° ì–´ë””ì— ìœ„ì¹˜í•˜ëŠ”ì§€ ê°™ì€ ì •ë³´ëŠ” ì£¼í‚¤í¼ì— ë³´ê´€)
- ì¹´í”„ì¹´ ë¸Œë¡œì»¤ê°€ ì‹œì‘í•˜ë©´ì„œ "ë‚´ê°€ í´ëŸ¬ìŠ¤í„°ì˜ ì¼ì›"ì„ì„ ì£¼í‚¤í¼ì— ë“±ë¡í•˜ê³  ê¸°ì¡´ ë¸Œë¡œì»¤ë“¤ê³¼ í† í”½, íŒŒí‹°ì…˜ ë©”íƒ€ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ìŠµë‹ˆë‹¤.
- ë¦¬ìŠ¤ë„ˆëŠ” PLAINTEXTë¡œ ì•”í˜¸í™”ë‚˜ ì¸ì¦ ì—†ì´ ì—°ê²°í•©ë‹ˆë‹¤.

`docker-compose up -d` ì‹¤í–‰ì‹œ ë°±ê·¸ë¼ìš´ë“œì— ë„ì›Œì§‘ë‹ˆë‹¤.

---

#### 1.2 í† í”½ ìƒì„±
```bash
docker exec -it clickstream-test-kafka-1 \
  kafka-topics --create \
    --topic clickstream \
    --bootstrap-server localhost:9092 \
    --partitions 1 \
    --replication-factor 1
```
- ë‹¨ìˆœ í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œ íŒŒí‹°ì…˜ê³¼ ë³µì œëŠ” í•˜ë‚˜ë§Œ ìƒì„±í•©ë‹ˆë‹¤.

---

#### 1.3 Producer ì½”ë“œ ì‘ì„±
ë‹¤ìŒê³¼ ê°™ì€ fastapi ì½”ë“œë¥¼ ì‘ì„±í•´ producer ì—­í• ì„ í•˜ë„ë¡ í•©ë‹ˆë‹¤.
```python
# ingest_kafka.py
from fastapi import FastAPI, Request
from fastapi.middleware.cors import CORSMiddleware
from confluent_kafka import Producer
import os, logging, json

logging.basicConfig(level=logging.INFO)
app = FastAPI()

app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_methods=["*"],
    allow_headers=["*"],
)

producer = Producer({'bootstrap.servers': os.getenv('BOOTSTRAP_SERVERS', 'localhost:9092')})

@app.post("/ingest")
async def ingest(request: Request):
    evt = await request.json()
    logging.info(f"Received click event: {evt}")
    producer.produce("clickstream", json.dumps(evt).encode("utf-8"))
    producer.flush()
    return {"status":"ok", "received":evt}
```
ì´ì œ ì´ ì½”ë“œë¥¼ `uvicorn ingest_kafka:app --host 0.0.0.0 --port 8000`ë¡œ ë¡œì»¬ì—ì„œ ì‹¤í–‰ì‹œì¼œë‘ì—ˆìŠµë‹ˆë‹¤. í•´ë‹¹ apië¡œ post ìš”ì²­ì„ ë³´ë‚´ë©´ ë©”ì‹œì§€ê°€ ìƒì„±ë©ë‹ˆë‹¤.

---

#### 1.4 Consumer ì‹¤í–‰
ì´ì œ ì¹´í”„ì¹´ì˜ ì»¨ìŠˆë¨¸ë¥¼ ì‹¤í–‰í•´ ë¡œê·¸ë¥¼ ì‚´í´ë´…ë‹ˆë‹¤.
```bash
docker exec -it clickstream-test-kafka-1 \
  kafka-console-consumer \
    --bootstrap-server localhost:9092 \
    --topic clickstream --from-beginning
```
í•´ë‹¹ ì½”ë“œë¡œ ì»¨ìŠˆë¨¸ë¥¼ ì‹¤í–‰ì‹œí‚¨ ìƒíƒœì—ì„œ, ì•„ê¹Œ ë„ì›Œë‘” producer ì—­í• ì„ í•˜ëŠ” apiì— curl ëª…ë ¹ì„ ë³´ë‚´ ë©”ì‹œì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
```bash
# ì˜ˆì‹œ
curl -X POST http://localhost:8000/ingest \
  -H "Content-Type: application/json" \
  -d '{"path":"/foo","tag":"BUTTON","id":"btn1","timestamp":"2025-05-22T09:45:00Z"}'
```
ê·¸ëŸ¼ ì¹´í”„ì¹´ì˜ ì»¨ìŠˆë¨¸ì— í•´ë‹¹ ë©”ì‹œì§€ê°€ ì „ë‹¬ë˜ì–´ ì¶œë ¥ë©ë‹ˆë‹¤.
![ì»¨ìŠˆë¨¸ì— ì¶œë ¥ëœ ì´ë¯¸ì§€](sources/project1_Ingest-web-click-log/2025-05-22-ì¹´í”„ì¹´-í´ëŸ¬ìŠ¤í„°/01.png)

> ë¡œì»¬ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!

---

### 2. EC2 ê¸°ë°˜ Kafka í´ëŸ¬ìŠ¤í„° êµ¬ì¶• ë° ê²€ì¦

ì´ì œ ë¡œì»¬ í…ŒìŠ¤íŠ¸ë¥¼ ë§ˆì³¤ìœ¼ë‹ˆ, Terraformìœ¼ë¡œ í”„ë¡œë¹„ì €ë‹í•œ EC2 ì¸ìŠ¤í„´ìŠ¤ ìœ„ì— Kafka í´ëŸ¬ìŠ¤í„°ë¥¼ ë°°í¬í•˜ê³  ì™¸ë¶€ì—ì„œ ë¡œê·¸ë¥¼ ìˆ˜ì‹ í•˜ëŠ” ê³¼ì •ì„ ì§„í–‰í•©ë‹ˆë‹¤.

---

#### 2.1 EC2 ì¸í”„ë¼ ì½”ë“œ (Terraform)
EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ Terraformìœ¼ë¡œ í”„ë¡œë¹„ì €ë‹í•˜ê³ , User Dataë¥¼ í†µí•´ Zookeeperì™€ Kafkaë¥¼ ìë™ìœ¼ë¡œ ì„¤ì¹˜í•˜ê³  ì´ë¥¼ AMIë¡œ ë§Œë“¤ì–´ ë‘¡ë‹ˆë‹¤.
í…Œë¼í¼ì€ ì‚¬ì „ ì„¤ì¹˜ ë˜ì–´ìˆê³  aws ì ‘ê·¼ì„ ìœ„í•œ ê¶Œí•œì„ ê°–ì¶”ê¸° ìœ„í•´ í…Œë¼í¼ ì „ìš© ì‚¬ìš©ìë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

> ì²˜ìŒë¶€í„° ìµœì†Œ ê¶Œí•œì„ ì¤€ìˆ˜í•˜ë©´ì„œ í…Œë¼í¼ì„ ì‹¤í–‰ì‹œí‚¤ë©´ ê¶Œí•œ ë¬¸ì œ ì—ëŸ¬ê°€ ìì£¼ ë°œìƒí•©ë‹ˆë‹¤. [ì¼ë‹¨ ì „ì²´ ê¶Œí•œì„ ì¤€ ë’¤ì— CloudTrail í™œë™ì„ ê¸°ë°˜ìœ¼ë¡œ ì„ ë³„ëœ ì •ì±…ìœ¼ë¡œ ê¶Œí•œì„ ì¶•ì†Œí•˜ëŠ” ë°©ë²•ë„ ìˆìœ¼ë‹ˆ ì°¸ê³ í•´ì£¼ì„¸ìš”.](https://docs.aws.amazon.com/IAM/latest/UserGuide/access-analyzer-policy-generation.html?utm_source=chatgpt.com#access-analyzer-policy-generation-api) 
{: .prompt-danger }

1. EC2 í”„ë¡œë¹„ì €ë‹ì„ ìœ„í•œ ìµœì†Œ ê¶Œí•œ `TerraformKafkaEC2Provisioning` ìƒì„±
2. í•´ë‹¹ ê¶Œí•œì„ ì¶”ê°€í•œ ì‚¬ìš©ì(terraform) ìƒì„±
3. ì‚¬ìš©ì ë³´ì•ˆ ìê²© ì¦ëª… > ì—‘ì„¸ìŠ¤ í‚¤ ìƒì„±
<div style="display: flex; justify-content: center; gap: 2%; align-items: flex-start;">
  <img src="sources/project1_Ingest-web-click-log/2025-05-22-ì¹´í”„ì¹´-í´ëŸ¬ìŠ¤í„°/02.png" alt="ì •ì±… ìƒì„±" style="height: auto;">
  <img src="sources/project1_Ingest-web-click-log/2025-05-22-ì¹´í”„ì¹´-í´ëŸ¬ìŠ¤í„°/03.png" alt="ì‚¬ìš©ì(terraform) ìƒì„±" style="height: auto;">
</div>

ì´ì œ ìƒì„±í•œ ì—‘ì„¸ìŠ¤ í‚¤ë¥¼ ê°œë°œ ì„œë²„ì— `aws configure` ì ìš©í•˜ê³  í•´ë‹¹ ì„œë²„ì—ì„œ í…Œë¼í¼ ì½”ë“œë¥¼ ì‹¤í–‰ì‹œí‚¤ê²Œ ë©ë‹ˆë‹¤.

- ê¸°ì¡´ì— ìˆë˜ VPC, Subnet ì‚¬ìš©. security group ë§Œë“¤ê¸° (í¬íŠ¸ë²ˆí˜¸ 22:ssh, 2181:zookeeper, 9092:kafka ì¸ë°”ìš´ë“œ í—ˆìš©)
- EC2 ìƒì„±ì‹œì— EBS ìƒì„± (ì˜êµ¬ ë³¼ë¥¨)

> ê¸°ì¡´ ê³„íšì—ëŠ” í”„ë¼ì´ë¹— ì„œë¸Œë„·ì— ì„¤ì¹˜í•˜ê³ ì í–ˆìœ¼ë‚˜ ec2 ë‚´ë¶€ì— ì›í•˜ëŠ” íŒ¨í‚¤ì§€ ì„¤ì¹˜ê°€ ì–´ë ¤ì›Œì„œ í¼ë¸”ë¦­ ì„œë¸Œë„·ì—ì„œ ì„¤ì¹˜í•˜ê³  ì´ˆê¸° ì„¸íŒ…ì„ ë§ˆì¹œ ë’¤ AMIë¡œ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
{: .prompt-tip}

---

#### 2.2 EC2ì— ì¹´í”„ì¹´ ì„¤ì¹˜ ë° ë™ì‘
ì¹´í”„ì¹´ë¥¼ ì„¤ì¹˜í•˜ê¸° ìœ„í•œ bash ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤. ë¡œì»¬ì—ì„œ í…ŒìŠ¤íŠ¸í•œ ë²„ì „ê³¼ ë™ì¼í•˜ê²Œ ì„¤ì •í–ˆê³  EC2 AMIëŠ” ì•„ë§ˆì¡´ ë¦¬ëˆ…ìŠ¤ 2ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
```bash
#!/bin/bash
# 1) ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸
yum update -y

# 2) Java ì„¤ì¹˜ (OpenJDK 11)
amazon-linux-extras install java-openjdk11 -y

# 3) Confluent Platform 7.4.1 ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜
wget https://packages.confluent.io/archive/7.4/confluent-community-7.4.1.tar.gz -P /opt
tar xzf /opt/confluent-community-7.4.1.tar.gz -C /opt
ln -s /opt/confluent-7.4.1 /opt/confluent

# 4) Kafka ë¸Œë¡œì»¤ ì„¤ì •
sed -i 's|^#listeners=.*|listeners=PLAINTEXT://0.0.0.0:9092|' /opt/confluent/etc/kafka/server.properties
sed -i 's|^#advertised.listeners=.*|advertised.listeners=PLAINTEXT://'"$(curl -s http://169.254.169.254/latest/meta-data/public-ipv4)"':9092|' /opt/confluent/etc/kafka/server.properties

# 5) Zookeeper, Kafka ì‹¤í–‰
CONFLUENT_DIR=/opt/confluent
ZOOKEEPER_PROP=$CONFLUENT_DIR/etc/kafka/zookeeper.properties
KAFKA_PROP=$CONFLUENT_DIR/etc/kafka/server.properties
ZK_BIN=$CONFLUENT_DIR/bin/zookeeper-server-start
KAFKA_BIN=$CONFLUENT_DIR/bin/kafka-server-start

sudo $ZK_BIN -daemon $ZOOKEEPER_PROP
sudo $KAFKA_BIN -daemon $KAFKA_PROP
```

ì´ë ‡ê²Œ ì‹¤í–‰í•˜ê²Œ ë˜ë©´ ë§¤ë²ˆ ìˆ˜ë™ìœ¼ë¡œ ëª…ë ¹ì„ ì‹¤í–‰í•´ì•¼í•´ ì„œë¹„ìŠ¤ë¡œ ë“±ë¡í•˜ë„ë¡ ì•„ë˜ ì‘ì—…ì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. systemd ì„œë¹„ìŠ¤ íŒŒì¼ì„ ìƒì„±í•˜ê³  enableë§Œ í•´ë†“ìœ¼ë©´ ë¶€íŒ…ì‹œì— ìë™ìœ¼ë¡œ ì‹œì‘ë©ë‹ˆë‹¤.

```bash
# 6) systemd ì„œë¹„ìŠ¤ íŒŒì¼ ìƒì„±
cat << 'EOT' > /etc/systemd/system/zookeeper.service
[Unit]
Description=Apache Zookeeper
After=network.target

[Service]
Type=simple
ExecStart=/opt/confluent/bin/zookeeper-server-start /opt/confluent/etc/kafka/zookeeper.properties
Restart=on-failure

[Install]
WantedBy=multi-user.target
EOT

cat << 'EOT' > /etc/systemd/system/kafka.service
[Unit]
Description=Apache Kafka
After=zookeeper.service

[Service]
Type=simple
ExecStart=/opt/confluent/bin/kafka-server-start /opt/confluent/etc/kafka/server.properties
Restart=on-failure

[Install]
WantedBy=multi-user.target
EOT

# 7) ì„œë¹„ìŠ¤ ë“±ë¡ ë° ì‹œì‘
sudo systemctl daemon-reload
sudo systemctl enable zookeeper.service kafka.service
sudo systemctl start zookeeper.service kafka.service
```

> ì£¼í‚¤í¼(2181), ì¹´í”„ì¹´(9092)ì˜ í¬íŠ¸ ëª¨ë‘ ë™ì‘í•˜ê³  ìˆë‹¤..!
![í¬íŠ¸ ë²ˆí˜¸ë¡œ í™•ì¸](sources/project1_Ingest-web-click-log/2025-05-22-ì¹´í”„ì¹´-í´ëŸ¬ìŠ¤í„°/04.png)

---

#### 2.3 ì¹´í”„ì¹´ í† í”½ ìƒì„± ë° í”„ë¡œë“€ì„œ/ì»¨ìŠˆë¨¸ í…ŒìŠ¤íŠ¸
```bash
/opt/confluent/bin/kafka-topics \
  --create \
  --topic clickstream \
  --bootstrap-server 0.0.0.0:9092 \
  --partitions 1 \
  --replication-factor 1
```
ì´ë ‡ê²Œ í† í”½ì„ ìƒì„±í•œ í›„ í”„ë¡œë“€ì„œì— ë©”ì‹œì§€ë¥¼ ë³´ë‚´ê³ , ì»¨ìŠˆë¨¸ì— ë©”ì‹œì§€ë¥¼ ì˜ ë°›ì•„ì˜¤ëŠ”ì§€ ì•„ë˜ì™€ ê°™ì´ í™•ì¸í–ˆìŠµë‹ˆë‹¤.
```bash
# Producer
/opt/confluent/bin/kafka-console-producer --broker-list localhost:9092 --topic clickstream  
# Consumer
/opt/confluent/bin/kafka-console-consumer --bootstrap-server localhost:9092 --topic clickstream --from-beginning
```
> EC2ì—ì„œë„ ë¡œì»¬ê³¼ ë™ì¼í•œ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!
![ë©”ì‹œì§€ ì˜ ë“¤ì–´ì˜¤ëŠ”ê±° í™•ì¸](sources/project1_Ingest-web-click-log/2025-05-22-ì¹´í”„ì¹´-í´ëŸ¬ìŠ¤í„°/05.png)

---

## ğŸš€ ê²°ë¡  ë° ë‹¤ìŒ ë‹¨ê³„

ì´ë²ˆ ê¸€ì—ì„œëŠ” **ë¡œì»¬ Docker Compose**, **EC2 ê¸°ë°˜ ì„¤ì¹˜**, **systemd ì„œë¹„ìŠ¤ ë“±ë¡**ì„ í†µí•´ ìµœì†Œ ë¹„ìš©ìœ¼ë¡œ Kafka ë‹¨ì¼ ë¸Œë¡œì»¤ í™˜ê²½ì„ ë„ì›Œë³´ê³ , í† í”½ ìƒì„±ê³¼ í”„ë¡œë“€ì„œÂ·ì»¨ìŠˆë¨¸ í…ŒìŠ¤íŠ¸ê¹Œì§€ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. ì§ì ‘ ì„¤ì¹˜Â·ìš´ì˜ ê³¼ì •ì„ ê²½í—˜í•˜ë©° Kafkaì˜ ë‚´ë¶€ ë™ì‘ ì›ë¦¬ë¥¼ ì´í•´í•˜ê³ , ë¶€íŠ¸ìŠ¤íŠ¸ë©Â·ë¦¬ìŠ¤ë„ˆ ì„¤ì •, Zookeeper ì—°ë™, systemdë¥¼ ì´ìš©í•œ ìë™ ê¸°ë™ ë°©ë²•ì„ ìµí˜”ìŠµë‹ˆë‹¤.

ì•ìœ¼ë¡œëŠ” ì´ PoCë¥¼ í™•ì¥í•˜ì—¬ **ë°ì´í„° íŒŒì´í”„ë¼ì¸**ì„ ì™„ì„±í•˜ëŠ” ë‹¨ê³„ë¡œ ë‚˜ì•„ê°‘ë‹ˆë‹¤:

1. **Lambda â†’ Kafka ì—°ë™**  
   - ì•ì„œ ë§Œë“  Ingest APIë¥¼ AWS Lambdaë¡œ ì´ì „í•˜ê³ , VPC ì„¤ì •ì„ í†µí•´ Kafka ë¸Œë¡œì»¤ë¡œ ì§ì ‘ í”„ë¡œë“€ì‹±  
2. **ë°°ì¹˜ ì €ì¥ì†Œ êµ¬ì„±**  
   - Kafka Connector ë˜ëŠ” ì»¤ìŠ¤í…€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì´ìš©í•´ S3Â·HDFSì— ì£¼ê¸°ì  ë°ì´í„° ì ì¬  
3. **ë¶„ì„ í™˜ê²½ êµ¬ì¶•**  
   - Spark ë˜ëŠ” Flink í´ëŸ¬ìŠ¤í„°ë¥¼ ì—°ë™í•´ ì‹¤ì‹œê°„Â·ë°°ì¹˜ ë¶„ì„ ì›Œí¬í”Œë¡œìš° êµ¬í˜„  
4. **ì‹¤ì‹œê°„ ì‹œê°í™”**  
   - Grafana/QuickSightì™€ ì—°ë™í•˜ì—¬ í´ë¦­ìŠ¤íŠ¸ë¦¼ ëŒ€ì‹œë³´ë“œ ì œì‘  
5. **í™•ì¥ & ìš´ì˜ ì•ˆì •í™”**  
   - ë‹¤ì¤‘ ë¸Œë¡œì»¤Â·íŒŒí‹°ì…˜ ë¶„í• ì„ í†µí•œ ê°€ìš©ì„± ê°œì„   
   - PrometheusÂ·CloudWatch ê¸°ë°˜ ëª¨ë‹ˆí„°ë§Â·ì•ŒëŒ ì„¤ì •  

ë‹¤ìŒ ê¸€ì—ì„œëŠ” **AWS Lambdaë¥¼ í™œìš©í•œ Kafka í”„ë¡œë“€ì‹±**, **S3 ë°°ì¹˜ ì ì¬** ê³¼ì •ì„ ì¤‘ì‹¬ìœ¼ë¡œ ë‹¨ê³„ë³„ ì½”ë“œ ì˜ˆì œì™€ Terraform ì„¤ì •ì„ ê³µìœ ë“œë¦¬ê² ìŠµë‹ˆë‹¤. 

## ì°¸ê³  ìë£Œ
- [Kafka Cluster with Docker Compose](https://medium.com/%40erkndmrl/kafka-cluster-with-docker-compose-5864d50f677e)
- [Install Apache Kafka in AWS EC2 Instance](https://medium.com/%40nimeshaamarasingha/install-apache-kafka-in-aws-ec2-instance-d530c387d265)
- [Use Confluent Platform systemd Service Unit Files](https://docs.confluent.io/platform/current/installation/installing_cp/scripted-install.html)
